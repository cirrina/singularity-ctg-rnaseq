Bootstrap:docker
From:nfcore/base


%environment
<<<<<<< HEAD
    PATH=/opt/:/usr/bin:/usr/local/bin:/opt/conda/envs/bladderreport/bin/:$PATH
=======
    export PATH=$PATH:/opt/software/conda/bin/
    source /opt/software/conda/bin/activate /opt/software/ctg_rnaseq_env
    # source /opt/software/conda/bin/activate /opt/software/ctg_rnaseq_env

>>>>>>> 196984372a386a97baa555495b8de99328f9e68a

%files
  environment.yml

%post

    rm -rf /var/lib/apt/lists/*
    apt -y clean
    apt-get -y update

    apt-get -y install locales apt-utils curl libz-dev build-essential gettext cmake libxml2-dev make libcurl4-openssl-dev libssl-dev libbz2-dev libboost-dev libtbb2 sudo tree


    opt/conda/bin/conda env create -f environment.yml


    # source /opt/software/conda/bin/activate /opt/software/ctg-rnaseq_env
    # conda /opt/software/conda/bin/activate /opt/software/ctg_rnaseq_env
    apt-get -y clean
    rm -rf /var/lib/apt/lists/*

%test
    #!/bin/sh
    exec R --slave -e "installed.packages()"

%runscript
    echo "Welcome to the ctg-rnaseq container"
    #exec virsorter "$@"
    exec R --slave -e "sessionInfo()"
    exec R --slave -e "installed.packages()"
    exec STAR --version
    # exec salmon --version
    # exec bowtie2 --version
    exec rsem-calculate-expression --version
    exec geneBody_coverage.py --version
